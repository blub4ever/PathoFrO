<?xml version="1.0" encoding="UTF-8"?>
<configuration debug="true">

	<appender name="STDOUT"
		class="ch.qos.logback.core.ConsoleAppender">
		<!-- encoders are by default assigned the type ch.qos.logback.classic.encoder.PatternLayoutEncoder -->
		<encoder>
			<pattern>%relative [%thread] %highlight(%-5level) %cyan(%logger{15}) - %msg %n
			</pattern>
		</encoder>
	</appender>

	<appender name="STDOUT_Patho"
		class="ch.qos.logback.core.ConsoleAppender">
		<!-- encoders are by default assigned the type ch.qos.logback.classic.encoder.PatternLayoutEncoder -->
		<encoder>
			<!-- <pattern>%relative [%thread] %highlight(%-5level) %magenta(%logger) - %msg %n -->
			<pattern>%class - %msg %n
			</pattern>
		</encoder>
	</appender>

	<appender name="rollingFile"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<rollingPolicy
			class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>${LOG_PATH}${LOG_FILE}-%d{yyyy-MM-dd}.html
			</fileNamePattern>
			<maxHistory>30</maxHistory>
			<totalSizeCap>3GB</totalSizeCap>
		</rollingPolicy>
		<triggeringPolicy
			class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
			<maxFileSize>3MB</maxFileSize>
		</triggeringPolicy>
		<encoder
			class="ch.qos.logback.core.encoder.LayoutWrappingEncoder">
			<layout class="ch.qos.logback.classic.html.HTMLLayout">
				<pattern>%thread%level%logger%msg</pattern>
			</layout>
		</encoder>
	</appender>

	<appender name="MAIL"
		class="ch.qos.logback.classic.net.SMTPAppender">
		<smtpHost>smtp.ukl.uni-freiburg.de</smtpHost>
		<smtpPort>25</smtpPort>
		<to>andreas.glatz@uniklinik-freiburg.de</to>
		<from>augenklinik.histologie@uniklinik-freiburg.de</from>
		<subject>Log of messages</subject>
		<layout class="ch.qos.logback.classic.html.HTMLLayout">
			<pattern>%date%level%logger{24}%msg</pattern>
		</layout>
		<cyclicBufferTracker
			class="ch.qos.logback.core.spi.CyclicBufferTracker">
			<bufferSize>1</bufferSize>
		</cyclicBufferTracker>
		<asynchronousSending>false</asynchronousSending>
	</appender>

	<logger name="com.patho.main" level="debug" additivity="false">
		<appender-ref ref="MAIL" />
		<appender-ref ref="STDOUT_Patho" />
	</logger>

	<root level="info">
		<appender-ref ref="STDOUT" />
		<appender-ref ref="MAIL" />
	</root>
</configuration>

