<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<composite:interface>
    <!-- source -->
    <composite:attribute name="source" required="true"
                         type="com.patho.main.util.ui.jsfcomponents.ISelectPhysicianOverlay"/>

</composite:interface>

<composite:implementation>
    <!-- surgeon overlay panel -->
    <p:overlayPanel id="#{cc.clientId}"
                    styleClass="histoOverlayPanel"
                    widgetVar="#{cc.clientId}" hideEffect="fade"
                    style="width:500px" hideEvent="mousedown" showEvent="none"
                    onkeypress="return false;">

        <p:dataTable id="surgeonPhysicianOverlayPanelDataTable"
                     widgetVar="surgeonPhysicianOverlayPanelDataTable"
                     disabledSelection="#{physicianSelector.contactOfTask}"
                     selection="#{cc.attrs.source.selectedPhysician}"
                     selectionMode="single"
                     value="#{cc.attrs.source.physicians}"
                     var="physicianSelector" styleClass="defaultHistoDataTable"
                     scrollable="true" scrollHeight="200"
                     rowKey="#{physicianSelector.id}" rowIndexVar="rowId">

            <!-- name -->
            <p:column id="nameColumn" style="width:auto"
                      filterValue="#{cc.attrs.source.filter}"
                      filterBy="#{physicianSelector.physician.person.getFullName()}"
                      filterMatchMode="contains">
                <h:outputText
                        style="#{physicianSelector.contactOfTask ? 'opacity: 0.3;' : ''}"
                        value="#{physicianSelector.physician.person.getFullName()}"/>
            </p:column>

            <!-- role -->
            <p:column style="width: 30%">
                <h:outputText
                        style="#{physicianSelector.contactOfTask ? 'opacity: 0.3;' : ''}"
                        value="#{physicianSelector.physician.clinicRole}"/>
            </p:column>

            <!-- already selected -->
            <p:column style="width:5%; text-align:center;">
                <f:facet name="header">
                    <i class="fa fa-check-square-o"/>
                </f:facet>

                <ui:fragment rendered="#{physicianSelector.contactOfTask}">
                    <i class="fa fa-check icon-green"/>
                </ui:fragment>
            </p:column>

            <p:ajax event="rowSelect"
                    listener="#{cc.attrs.source.onSelect}"
                    oncomplete="PF('#{cc.clientId}').hide();"/>

        </p:dataTable>
    </p:overlayPanel>
</composite:implementation>
</html>

