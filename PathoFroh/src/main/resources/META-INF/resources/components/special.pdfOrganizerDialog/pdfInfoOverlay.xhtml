<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:composite="http://java.sun.com/jsf/composite"
>

<!--calling button-->
<!--<p:commandLink-->
<!--styleClass="contactInfoOverplayTrigger"-->
<!--icon="pi pi-search"-->
<!--actionListener="#{archiveTaskDialog.setSelectedReportIntentStatus(reportIntent)}"-->
<!--partialSubmit="true"-->
<!--process="@this"-->
<!--update="dialogContent:contactInfoOverlayPanel"-->
<!--oncomplete="commonFunctions.showOverlayPanel('contactInfoOverlayPanel', '#{component.clientId}');">-->
<!--<i class="fa fa-info-circle"/>-->
<!--</p:commandLink>-->

<composite:interface>
    <!-- com.patho.main.util.status.reportIntentent.ReportIntentStatusByReportIntentAndDiagnosis.ReportIntentBearer -->
    <composite:attribute name="controller" required="true"
                         type="com.patho.main.ui.pdf.PDFStreamContainerImpl"/>
    <!-- id and widgetvar of the overlaypanel -->
    <composite:attribute name="wid" required="true" default="false"/>
    <!-- custom class of trigger button, to add the trigger event -->
    <composite:attribute name="triggerClass" required="true" default="false"/>
</composite:interface>

<composite:implementation>

    <script type="text/javascript">
        commonFunctions.addGlobalHideOverlayPanelOnMouseClickHandler("#{cc.attrs.wid}")
        commonFunctions.addShowDialogOnMouseEnterByCommand(".#{cc.attrs.triggerClass}", "#{cc.attrs.wid}","test1235466")
    </script>

    <!-- overlay for contact notifications -->
    <p:overlayPanel widgetVar="#{cc.attrs.wid}" hideEvent="null" showEvent="null" style="padding-bottom: 5px;"
                    dismissable="false" id="#{cc.attrs.wid}" styleClass="histoOverlayPanel">

        <h:panelGrid columns="2"
                     columnClasses="columnTop, columnLeft" id="bild2"
                     style="width:100%"
                     styleClass="defaultHistoHiddenTableContainer">
            <h:panelGrid columns="2" styleClass="defaultHistoTable">
                <!-- name -->
                <h:outputText
                        value="#{msg['dialog.pdfOrganizer.files.name']}"/>
                <h:outputText value="#{pdfOrganizerDialog.streamContainer.tooltip.name}">
                    <f:converter converterId="org.histo.ui.TruncateConverter"/>
                    <f:attribute name="truncateAt" value="35"/>
                    <f:attribute name="continuationMark" value="..."/>
                </h:outputText>

                <!-- created date-->
                <h:outputText
                        value="#{msg['component.auditTable.createdOn']}"/>
                <h:outputText value="#{pdfOrganizerDialog.streamContainer.tooltip.audit.createdOn}">
                    <f:convertDateTime type="date"
                                       pattern="dd.MM.yyyy HH:mm:ss"/>
                </h:outputText>

                <!-- created name-->
                <h:outputText
                        value="#{msg['component.auditTable.createdBy']}"/>
                <h:outputText value="#{pdfOrganizerDialog.streamContainer.tooltip.audit.createdBy}">
                </h:outputText>

                <!-- updated date-->
                <h:outputText
                        value="#{msg['component.auditTable.updatedOn']}"/>
                <h:outputText
                        style="#{pdfOrganizerDialog.streamContainer.tooltip.audit.updatedOn eq 0 ? 'display:none' : ''}"
                        value="#{pdfOrganizerDialog.streamContainer.tooltip.audit.updatedOn}">
                    <f:convertDateTime type="date"
                                       pattern="dd.MM.yyyy HH:mm:ss"/>
                </h:outputText>

                <!-- updated name-->
                <h:outputText
                        value="#{msg['component.auditTable.updatedBy']}"/>
                <h:outputText value="#{pdfOrganizerDialog.streamContainer.tooltip.audit.updatedBy}">
                </h:outputText>

                <!-- type -->
                <h:outputText
                        value="#{msg['dialog.pdfOrganizer.files.type']}"/>
                <h:outputLabel
                        value="#{msg['enum.documentType.'.concat(pdfOrganizerDialog.streamContainer.tooltip.type)]}"/>

                <!-- commentary -->
                <h:outputText
                        value="#{msg['dialog.pdfOrganizer.files.commentary']}"/>
                <h:outputText value="#{pdfOrganizerDialog.streamContainer.tooltip.commentary}"
                              title="#{pdfOrganizerDialog.streamContainer.tooltip.commentary}">
                    <f:converter converterId="org.histo.ui.TruncateConverter"/>
                    <f:attribute name="truncateAt" value="35"/>
                    <f:attribute name="continuationMark" value="..."/>
                </h:outputText>
            </h:panelGrid>

            <!-- preview image -->
            <h:panelGrid columns="1" styleClass="defaultHistoTable">
                <p:graphicImage
                        value="#{pdfOrganizerDialog.streamContainer.getThumbnail()}"
                        style="border: 1px solid black; float: right;"
                        width="200px" cache="false" alt="unable to load image"/>
            </h:panelGrid>
        </h:panelGrid>
    </p:overlayPanel>

</composite:implementation>
</html>
