<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">


    <!-- notificationPerformBtn ->  : ctrl + b -->
    <!-- addPatientButton -> search patient : ctrl + b -->
    <!-- showPatientOverview -> patient overview : alt + o -->
    <!-- uploadBtn -> pdf organizer : ctrl + u -->
    <!-- mergePatientData -> merge patient : ctrl + m-->

    <script>
        $(document).off('keydown').on('keydown', function () {
            console.debug(event.keyCode)
            console.debug(event.ctrlKey)
            if (event.ctrlKey &amp;&amp; event.keyCode == "b".charCodeAt(0)) {
                PF('notificationPerformBtn').jq.click();
                return false;
            }
        })
    </script>

    <h:panelGroup styleClass="hiddenButton">
        <p:commandButton id="notificationPerformBtn" widgetVar="notificationPerformBtn"
                         actionListener="#{notificationDialog.initAndPrepareBean(worklistHandler.current.selectedTask)}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onDefaultReturn}"
                    update="navigationForm:patientList contentForm headerForm"/>
        </p:commandButton>

        <!-- Search patient -->
        <p:hotkey bind="ctrl+s"
                  oncomplete=" PF('addPatientButton').jq.click();return false;"/>
        <p:commandButton id="addPatientButton" widgetVar="addPatientButton"
                         actionListener="#{dialog.searchPatientDialog.initAndPrepareBean().externalMode().persistPatient()}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onSearchForPatientReturn}"
                    oncomplete="updateAndAutoScrollToSelectedElement('navigationForm:patientNavigationScroll;;ui-state-highlight')"
                    update="navigationForm:patientList contentForm headerForm"/>
        </p:commandButton>

        <!-- show patient data-->
        <p:hotkey bind="alt+o"
                  oncomplete="PF('showPatientOverview').jq.click();return false;"/>
        <p:commandButton id="showPatientOverview" widgetVar="showPatientOverview"
                         actionListener="#{centralHandler.onDeselectTas}"
                         update=" navigationForm:patientList contentForm:contentPanel headerForm"/>

        <!-- pdf handler -->
        <p:hotkey bind="ctrl+u"
                  oncomplete="PF('uploadBtn').jq.click();return false;"/>
        <p:commandButton id="uploadBtn" widgetVar="uploadBtn"
                         actionListener="#{dialog.pdfOrganizer.initAndPrepareBean(worklistHandler.current.selectedPatient)}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onDefaultReturn}"
                    update="navigationForm:patientList contentForm:contentPanel headerForm"/>
        </p:commandButton>

        <!-- Merge Patient  -->
        <p:hotkey bind="ctrl+m"
                  oncomplete="PF('mergePatientData').jq.click();return false;"/>
        <p:commandButton id="mergePatientData" widgetVar="mergePatientData"
                         actionListener="#{dialog.mergePatientDialog.initAndPrepareBean(worklistHandler.current.selectedPatient)}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onPatientMergeReturn}"
                    update="navigationForm:patientList contentForm headerForm"/>
        </p:commandButton>

        <!-- Edit Patient data -->
        <p:hotkey bind="ctrl+e"
                  oncomplete="PF('editPatientData').jq.click();return false;"/>
        <p:commandButton id="editPatientData" widgetVar="editPatientData"
                         actionListener="#{dialog.editPatientDialog.initAndPrepareBean(worklistHandler.current.selectedPatient)}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onDefaultReturn}"
                    update="navigationForm:patientList contentForm"/>
        </p:commandButton>

        <!-- Remove patient -->
        <p:commandButton id="removePatient"
                         actionListener="#{dialog.deletePatientDialog.initAndPrepareBean(worklistHandler.current.selectedPatient)}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onPatientDeleteReturn}"
                    oncomplete="updateAndAutoScrollToSelectedElement('navigationForm:patientNavigationScroll')"
                    update="navigationForm:patientList contentForm"/>
        </p:commandButton>

        <!-- New Task Button -->
        <p:hotkey bind="alt+t"
                  oncomplete="PF('newTaskBtn').jq.click();return false;"/>
        <p:commandButton id="newTaskBtn" widgetVar="newTaskBtn"
                         actionListener="#{dialog.createTaskDialog.initAndPrepareBean(worklistHandler.current.selectedPatient)}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onDefaultReturn}"
                    oncomplete="updateAndAutoScrollToSelectedElement('navigationForm:patientNavigationScroll')"
                    update="navigationForm:patientList contentForm:contentPanel headerForm"/>
        </p:commandButton>

        <!-- New Sample -->
        <p:hotkey bind="alt+s"
                  oncomplete="PF('newSampleBtn').jq.click();return false;"/>
        <p:commandButton id="newSampleBtn" widgetVar="newSampleBtn"
                         actionListener="#{dialog.createSampleDialog.initAndPrepareBean(worklistHandler.current.selectedTask)}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onStainingPhaseUpdateReturn}"
                    update="navigationForm:patientList contentForm headerForm"/>
        </p:commandButton>

        <!-- Staining overview -->
        <p:hotkey bind="alt+f"
                  oncomplete="PF('stainingOverview').jq.click();return false;"/>
        <p:commandButton id="stainingOverview" widgetVar="stainingOverview"
                         actionListener="#{dialog.slideOverviewDialog.initAndPrepareBean(worklistHandler.current.selectedTask)}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onDefaultReturn}"
                    update="navigationForm:patientList contentForm headerForm"/>
        </p:commandButton>

        <!-- StainingPhase Exit -->
        <p:commandButton id="stainingPhaseExit" widgetVar="stainingPhaseExit"
                         actionListener="#{dialog.stainingPhaseExitDialog.initAndPrepareBean(worklistHandler.current.selectedTask, true)}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onStainingPhaseExitReturn}"
                    update="navigationForm:patientList contentForm:contentPanel headerForm"/>
        </p:commandButton>

    </h:panelGroup>

    <h:panelGroup styleClass="hiddenButton">


        <!-- StainingPhase enter -->
        <p:commandButton id="stainingPhaseEnter"
                         oncomplete="updateAndAutoScrollToSelectedElement('navigationForm:patientNavigationScroll')"
                         update="navigationForm:patientList contentForm headerForm">
            <f:actionListener
                    binding="#{workPhaseHandler.startStainingPhase(worklistHandler.current.selectedTask)}"/>
        </p:commandButton>

        <!-- Diagnosis List, new diagnosis revision -->
        <p:commandButton id="newDiagnosisRevision"
                         actionListener="#{dialog.createDiagnosisRevisionDialog.initAndPrepareBean(worklistHandler.current.selectedTask)}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onDefaultDialogReturn}"
                    update="navigationForm:patientList contentForm:contentPanel headerForm"/>
        </p:commandButton>

        <!-- DiagnosisPhase Exit -->
        <p:commandButton id="diagnosisPhaseExit"
                         actionListener="#{dialog.diagnosisPhaseExitDialog.initAndPrepareBean(worklistHandler.current.selectedTask)}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onDiagnosisPhaseExitReturn}"
                    oncomplete="updateAndAutoScrollToSelectedElement('navigationForm:patientNavigationScroll')"
                    update="navigationForm:patientList contentForm headerForm"/>
        </p:commandButton>

        <!-- DiagnosisPhase Enter -->
        <p:commandButton id="diagnosisPhaseEnter"
                         oncomplete="updateAndAutoScrollToSelectedElement('navigationForm:patientNavigationScroll')"
                         update="navigationForm:patientList contentForm headerForm">
            <f:actionListener
                    binding="#{diagnosisService.startDiagnosisPhase(worklistHandler.current.selectedTask)}"/>
            <f:actionListener
                    listener="#{centralHandler.loadViews('RELOAD_TASK_STATUS', 'MENU_MODEL', 'RELOAD_MENU_MODEL_FAVOURITE_LISTS')}"/>
        </p:commandButton>

        <!-- Council button -->
        <p:commandButton id="councilBtn"
                         actionListener="#{dialog.councilDialog.initAndPrepareBean(worklistHandler.current.selectedTask)}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onDefaultDialogReturn}"
                    oncomplete="updateAndAutoScrollToSelectedElement('navigationForm:patientNavigationScroll')"
                    update="navigationForm:patientList contentForm headerForm"/>
        </p:commandButton>

        <p:hotkey bind="shift+c"
                  oncomplete="$('#headerForm\\:councilBtn').click();return false;"/>

        <!-- Contacts button -->
        <p:commandButton id="editContactBtn"
                         actionListener="#{contactDialog.initAndPrepareBean(worklistHandler.current.selectedTask)}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onDefaultDialogReturn}"
                    oncomplete="updateAndAutoScrollToSelectedElement('navigationForm:patientNavigationScroll')"
                    update="navigationForm:patientList contentForm headerForm"/>
        </p:commandButton>

        <!-- Notification exit -->
        <p:commandButton id="notificationPhaseExit"
                         actionListener="#{dialogHandlerAction.notificationPhaseExitDialog.initAndPrepareBean(worklistHandler.current.selectedTask)}">
            <p:ajax event="dialogReturn"
                    oncomplete="updateAndAutoScrollToSelectedElement('navigationForm:patientNavigationScroll')"
                    update="navigationForm:patientList contentForm headerForm"
                    listener="#{centralHandler.loadViews('RELOAD_TASK_STATUS', 'MENU_MODEL', 'RELOAD_MENU_MODEL_FAVOURITE_LISTS')}"/>
        </p:commandButton>

        <!-- Archive Task -->
        <p:commandButton id="archiveTaskBtn"
                         actionListener="#{archiveTaskDialog.initAndPrepareBean(worklistHandler.current.selectedTask)}">
            <p:ajax event="dialogReturn"
                    oncomplete="updateAndAutoScrollToSelectedElement('navigationForm:patientNavigationScroll')"
                    listener="#{centralHandler.loadViews('RELOAD_TASK_STATUS', 'MENU_MODEL', 'RELOAD_MENU_MODEL_FAVOURITE_LISTS')}"
                    update="navigationForm:patientList contentForm headerForm"/>
        </p:commandButton>

        <!-- restore Task -->
        <p:commandButton id="restoreTaskBtn"
                         actionListener="#{dialog.restoreTaskDialog.initAndPrepareBean(worklistHandler.current.selectedTask)}">
            <p:ajax event="dialogReturn"
                    oncomplete="updateAndAutoScrollToSelectedElement('navigationForm:patientNavigationScroll')"
                    listener="#{centralHandler.loadViews('RELOAD_TASK_STATUS', 'MENU_MODEL', 'RELOAD_MENU_MODEL_FAVOURITE_LISTS')}"
                    update="navigationForm:patientList contentForm headerForm"/>
        </p:commandButton>

        <!-- Biobank button -->
        <p:commandButton id="bioBankBtn"
                         actionListener="#{dialog.bioBankDialog.initAndPrepareBean(worklistHandler.current.selectedTask)}">
            <p:ajax event="dialogReturn"
                    oncomplete="updateAndAutoScrollToSelectedElement('navigationForm:patientNavigationScroll')"
                    update="navigationForm:patientList contentForm headerForm"/>
        </p:commandButton>

        <!-- Print button -->
        <p:commandButton id="printBtn" widgetVar="printBtnVar"
                         actionListener="#{printDialog.initAndPrepareBean(worklistHandler.current.selectedTask)}">
            <p:ajax event="dialogReturn"
                    update="navigationForm:patientList contentForm headerForm"/>
        </p:commandButton>

        <p:hotkey bind="alt+p"
                  oncomplete="$('#headerForm\\:printBtn').click();return false;"/>
        <!-- *************** Task Menu *************** -->

        <!-- *************** Log Menu *************** -->
        <p:commandButton id="logBtn"
                         actionListener="#{dialog.patientLogDialog.initAndPrepareBean(worklistHandler.current.selectedPatient)}">
            <p:ajax event="dialogReturn" update="contentForm"/>
        </p:commandButton>
        <!-- *************** Log Menu *************** -->

        <!-- settings button -->
        <p:commandButton id="settingsDialogBtn" partialSubmit="true"
                         process="@this"
                         actionListener="#{dialog.settingsDialog.initAndPrepareBean()}">
            <p:ajax event="dialogReturn"
                    listener="#{globalEditViewHandler.reloadAllData()}"
                    oncomplete="updateAndAutoScrollToSelectedElement('navigationForm:patientNavigationScroll')"
                    update="navigationForm:patientList contentForm"/>
        </p:commandButton>

        <p:hotkey bind="alt+shift+s"
                  oncomplete="$('#headerForm\\:settingsDialogBtn').click();return false;"/>

        <!-- accounting button -->
        <p:commandButton id="accountingDialogBtn" partialSubmit="true"
                         process="@this"
                         actionListener="#{dialog.accountingDataDialog.initAndPrepareBean()}">
            <p:ajax event="dialogReturn"/>
        </p:commandButton>

        <p:hotkey bind="alt+shift+a"
                  oncomplete="$('#headerForm\\:accountingDialogBtn').click();return false;"/>

        <!-- userSettings button -->
        <p:commandButton id="userSettingsDialogBtn"
                         actionListener="#{dialog.userSettingsDialog.initAndPrepareBean()}">
            <p:ajax event="dialogReturn"
                    listener="#{dialogReturnHandler.onUserSettingsReturn}"
                    update="navigationForm:patientList contentForm"/>
        </p:commandButton>

        <p:hotkey bind="alt+shift+u"
                  oncomplete="$('#headerForm\\:userSettingsDialogBtn').click();return false;"/>

        <!-- Info button -->
        <p:commandButton id="infoDialogBtn"
                         actionListener="#{dialog.programmVersionDialog.initAndPrepareBean()}">
            <p:ajax event="dialogReturn"
                    update="navigationForm:patientList contentForm"/>
        </p:commandButton>


    </h:panelGroup>
</ui:composition>
