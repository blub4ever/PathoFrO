<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<p:outputPanel styleClass="headerPannel">
		<h:outputLabel value="#{msg['dialog.notification.tab.send.headline']}" />
		<h:outputLabel
			rendered="#{dialog.notificationDialog.generalTab.temporaryNotification}"
			value=" (#{msg['dialog.notification.tab.send.headline.temporaray']})"></h:outputLabel>
	</p:outputPanel>

	<p:outputPanel styleClass="	bodyPannelScroll"
		style="height: calc(100% - 150px)">
		
		<h:panelGrid columns="1" styleClass="defaultHistoTable"
			id="summaryTable" style="width:100%"
			columnClasses="columnWidth150, ">
			
			<!-- **************** Mails **************** -->
			<h:panelGroup>
				<h:outputText value="#{msg['dialog.notification.tab.send.email']}: "
					styleClass="bigFont" />

				<!-- enable -->
				<h:outputText value="#{msg['dialog.notification.tab.send.active']}"
					styleClass="icon-green bigFont"
					rendered="#{dialog.notificationDialog.mailTab.useNotification}" />

				<!-- disable -->
				<h:outputText
					value="#{msg['dialog.notification.tab.send.inacitve']}"
					rendered="#{!dialog.notificationDialog.mailTab.useNotification}" />

			</h:panelGroup>

			<p:dataTable var="emailHolder"
				styleClass="defaultHistoDataTable histoDataTable-HideColumnHeader"
				value="#{dialog.notificationDialog.mailTab.containerToNotify}">

				<!-- name and email -->
				<p:column>
					<h:outputLabel
						value="#{emailHolder.contact.person.getFullName()} (#{emailHolder.contactAddress})"></h:outputLabel>

					<!-- Warning -->
					<ui:fragment rendered="#{emailHolder.warning}">
						<i class="fa fa-fw fa-exclamation-circle icon-orange"
							title="#{msg[emailHolder.warningInfo]}" />
					</ui:fragment>
				</p:column>

				<!-- performed -->
				<p:column style="width: 5%">
					<ui:fragment
						rendered="#{emailHolder.notification.performed and !emailHolder.notification.failed}">
						<i class="fa fa-fw fa-check-circle icon-green" />
					</ui:fragment>

					<ui:fragment
						rendered="#{emailHolder.notification.performed and emailHolder.notification.failed}">
						<i class="fa fa-fw fa-times-circle icon-red"
							title="#{emailHolder.notification.commentary}" />
					</ui:fragment>
				</p:column>
			</p:dataTable>

			<!-- **************** Fax **************** -->
			<h:panelGroup>
				<h:outputText value="#{msg['dialog.notification.tab.send.fax']}: "
					styleClass="bigFont" />

				<!-- enable -->
				<h:outputText value="#{msg['dialog.notification.tab.send.active']}"
					styleClass="icon-green bigFont"
					rendered="#{dialog.notificationDialog.faxTab.useNotification }" />
				<!-- disable -->
				<h:outputText
					value="#{msg['dialog.notification.tab.send.inacitve']}"
					rendered="#{!dialog.notificationDialog.faxTab.useNotification }" />

			</h:panelGroup>

			<p:dataTable var="faxHolder"
				styleClass="defaultHistoDataTable histoDataTable-HideColumnHeader"
				value="#{dialog.notificationDialog.faxTab.containerToNotify}">

				<!-- name and fax -->
				<p:column>
					<h:outputLabel
						value="#{faxHolder.contact.person.getFullName()} (#{faxHolder.contactAddress})"></h:outputLabel>

					<!-- Warning -->
					<ui:fragment rendered="#{faxHolder.warning}">
						<i class="fa fa-fw fa-exclamation-circle icon-orange"
							title="#{msg[faxHolder.warningInfo]}" />
					</ui:fragment>

				</p:column>

				<!-- performed -->
				<p:column style="width: 5%">
					<ui:fragment
						rendered="#{faxHolder.notification.performed and !faxHolder.notification.failed}">
						<i class="fa fa-fw fa-check-circle icon-green" />
					</ui:fragment>

					<ui:fragment
						rendered="#{faxHolder.notification.performed and faxHolder.notification.failed}">
						<i class="fa fa-fw fa-times-circle icon-red"
							title="#{faxHolder.notification.commentary}" />
					</ui:fragment>
				</p:column>

			</p:dataTable>

			<!-- **************** Letter **************** -->
			<h:panelGroup>
				<h:outputText
					value="#{msg['dialog.notification.tab.send.letter']}: "
					styleClass="bigFont" />

				<!-- enable -->
				<h:outputText value="#{msg['dialog.notification.tab.send.active']}"
					styleClass="icon-green bigFont"
					rendered="#{dialog.notificationDialog.letterTab.useNotification }" />

				<!-- disable -->
				<h:outputText
					value="#{msg['dialog.notification.tab.send.inacitve']}"
					rendered="#{!dialog.notificationDialog.letterTab.useNotification }" />

			</h:panelGroup>

			<p:dataTable var="letterHolder"
				styleClass="defaultHistoDataTable histoDataTable-HideColumnHeader"
				value="#{dialog.notificationDialog.letterTab.containerToNotify}">

				<!-- name -->
				<p:column>
					<h:outputLabel value="#{letterHolder.contact.person.getFullName()}" />

					<!-- Warning -->
					<ui:fragment rendered="#{letterHolder.warning}">
						<i class="fa fa-fw fa-exclamation-circle icon-orange"
							title="#{msg[letterHolder.warningInfo]}" />
					</ui:fragment>

				</p:column>

				<!-- performed -->
				<p:column style="width: 5%">
					<ui:fragment
						rendered="#{letterHolder.notification.performed and !letterHolder.notification.failed}">
						<i class="fa fa-fw fa-check-circle icon-green" />
					</ui:fragment>

					<ui:fragment
						rendered="#{letterHolder.notification.performed and letterHolder.notification.failed}">
						<i class="fa fa-fw fa-times-circle icon-red"
							title="#{letterHolder.notification.commentary}" />
					</ui:fragment>
				</p:column>
			</p:dataTable>

			<!-- **************** Phone **************** -->
			<h:panelGroup>
				<h:outputText value="#{msg['dialog.notification.tab.send.phone']}: "
					styleClass="bigFont" />

				<!-- enable -->
				<h:outputText value="#{msg['dialog.notification.tab.send.active']}"
					styleClass="icon-green bigFont"
					rendered="#{dialog.notificationDialog.phoneTab.useNotification }" />

				<!-- disable -->
				<h:outputText
					value="#{msg['dialog.notification.tab.send.inacitve']}"
					rendered="#{!dialog.notificationDialog.phoneTab.useNotification }" />

			</h:panelGroup>

			<p:dataTable var="phoneHolder"
				styleClass="defaultHistoDataTable histoDataTable-HideColumnHeader"
				value="#{dialog.notificationDialog.phoneTab.containerToNotify}">
				<p:column>
					<!-- name -->
					<h:outputLabel
						value="#{phoneHolder.contact.person.getFullName()} (#{phoneHolder.contactAddress})" />

					<!-- Warning -->
					<ui:fragment rendered="#{phoneHolder.warning}">
						<i class="fa fa-fw fa-exclamation-circle icon-orange"
							title="#{msg[phoneHolder.warningInfo]}" />
					</ui:fragment>
				</p:column>
			</p:dataTable>
		</h:panelGrid>
	</p:outputPanel>

	<p:outputPanel id="test12345" style="heigh:200px;">

		<h:panelGrid columns="1" styleClass="newStyleListingTable"
			style="width:100%; margin-top:20px;">
			<h:outputText
				value="#{dialog.notificationDialog.sendTab.feedback} (#{dialog.notificationDialog.sendTab.progressPercent}%)"
				id="progressLable"
				style="border: 1px solid; width:90%;display:block; text-align:center; background: linear-gradient(90deg, #fcf1b8 #{dialog.notificationDialog.sendTab.progressPercent}%, transparent 0%);margin: 0px auto;" />

			<p:poll autoStart="false" widgetVar="ajaxProgressPoll"
				partialSubmit="true" process="@this"
				stop="#{dialog.notificationDialog.sendTab.notificationCompleted}"
				update="progressLable summaryTable" interval="1" />
		</h:panelGrid>

	</p:outputPanel>

	<div class="buttonContainer">
		<h:panelGrid columns="2" style="width:100%"
			styleClass="newTableContainer">

			<h:panelGrid columns="2" styleClass="newTableContainer left">
				<!-- print -->
				<h:outputLabel value="#{msg['dialog.notification.tab.send.print']} "
					title="#{msg['dialog.notification.tab.send.print.text']}" />

				<!-- select printer -->
				<p:selectOneMenu styleClass="customSerachSelectMenu"
					title="#{msg['dialog.print.selectPrinter']}"
					panelStyleClass="customSerachSelectMenuPanel"
					converter="#{printService.cupsPrinter.printerTransformer}"
					value="#{userHandlerAction.selectedPrinter}" filter="true"
					filterMatchMode="contains">

					<f:selectItems value="#{printService.cupsPrinter.printer}"
						var="printer" itemLabel="#{printer.name}" itemValue="#{printer}" />

					<p:ajax event="change" process="@this"></p:ajax>
				</p:selectOneMenu>

			</h:panelGrid>

			<h:panelGrid columns="3" styleClass="newTableContainer right">
				<h:panelGroup>
					<p:commandButton
						value="#{msg['dialog.notification.tab.send.perform']}"
						icon="fa fa-fw fa-mail-forward"
						title="#{msg['dialog.notification.tab.send.perform.text']}"
						rendered="#{!dialog.notificationDialog.sendTab.notificationCompleted}"
						onstart="PF('blockUIWidget').block()"
						onclick="performeNotificationCommand();PF('startNotificationButton').disable();PF('ajaxProgressPoll').start();"
						widgetVar="startNotificationButton" />

					<p:remoteCommand async="true" name="performeNotificationCommand"
						actionListener="#{dialog.notificationDialog.sendTab.performeNotification()}"></p:remoteCommand>

					<p:remoteCommand name="onNotificationCompleted" update="@form"
						onstart="PF('blockUIWidget').unblock()"
						actionListener="#{dialog.notificationDialog.nextTab()}"></p:remoteCommand>
				</h:panelGroup>

				<!-- close -->
				<p:commandButton value="#{msg['general.close']}"
					icon="fa fa-times-circle"
					actionListener="#{dialog.notificationDialog.hideDialog()}" />

			</h:panelGrid>
		</h:panelGrid>
	</div>


</ui:composition>
