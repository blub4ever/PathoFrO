<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<h:head>
	<title><h:outputFormat
			value="#{msg['dialog.council.headline']}" /></title>
	<h:outputStylesheet name="style.css" value="style.css" library="css" />
	<h:outputStylesheet name="specificStyle.css" value="specificStyle.css"
		library="css" />
	<h:outputScript library="scripts" name="commonFunctions.js" />
</h:head>

<h:body styleClass="histoDialogStyle">
	<h:form id="dialogContent">

		<div class="dialogHeader">
			<h:panelGrid style="width:100%;" columns="2"
				styleClass="defaultHistoTable">
				<h:outputLabel value="#{msg['dialog.council.headline']}" />
				<p:commandLink title="#{msg['general.close']}" style="float:right;"
					onclick="$('#dialogContent\\:closeBtn').click();return false;">
					<i class="fa fa-fw fa-times" />
				</p:commandLink>
			</h:panelGrid>
		</div>

		<div class="dialogContent">
			<h:panelGrid columns="2"
				styleClass="defaultHistoHiddenTableContainer"
				columnClasses="columnTop columnWidth250, columnTop"
				style="width:100%">
				<p:panelGrid styleClass="defaultHistoHiddenTableContainer"
					style="background: black; height: 655px;width:100%">
					<p:row>
						<p:column styleClass="columnTop">
							<!-- scrolling -->
							<p:scrollPanel styleClass="histoScrollPanelStyle" id="scrollBody"
								style="height:400px;">
								<!-- navigation tree -->
								<p:tree value="#{dialog.councilDialog.root}" var="node"
									styleClass="histoTree" style="width:99%" id="menuTree"
									selectionMode="single" draggable="true" droppable="true"
									dropRestrict="pdf"
									selection="#{dialog.councilDialog.selectedNode}">

									<p:ajax event="select" update="dialogContent:content"
										listener="#{dialog.pdfOrganizer.displaySelectedContainer()}" />

									<p:ajax event="dragdrop" onstart="setMouseEnterEvents(false)"
										listener="#{dialog.pdfOrganizer.onDragDrop}"
										update="dialogContent:menuTree"
										oncomplete="setMouseEnterEvents(true)" />

									<!-- root -->
									<p:treeNode expandedIcon="ui-icon-folder-open"
										collapsedIcon="ui-icon-folder-collapsed">
										<h:outputText value="#{node}" />
									</p:treeNode>

									<!-- Task -->
									<p:treeNode type="task" expandedIcon="ui-icon-folder-open"
										collapsedIcon="ui-icon-folder-collapsed">
										<h:outputText value="#{node.taskID}" />
									</p:treeNode>

									<!-- coucil -->
									<p:treeNode type="council" expandedIcon="fa fa-comment-o"
										collapsedIcon="fa fa-comment-o">
										<h:outputText value="#{node.name}" />
									</p:treeNode>

									<!-- council request -->
									<p:treeNode type="council_request" expandedIcon="fa fa-file-text-o"
										collapsedIcon="fa fa-file-text-o">
										<h:outputText value="Anfrage" />
									</p:treeNode>
								</p:tree>

							</p:scrollPanel>
						</p:column>
					</p:row>
				</p:panelGrid>

				<h:panelGrid id="content"
					styleClass="listingHistoHiddenTableContainer"
					style="width:calc(100% - 5px)">
					<h:outputFormat value="test"></h:outputFormat>
				</h:panelGrid>
			</h:panelGrid>
		</div>

		<div class="buttonContainer">
			<h:panelGrid columns="2" style="width:100%"
				styleClass="noBordersAll collapsedBordersAll noPaddingAll">

				<!-- add new council -->
				<h:panelGrid columns="1" styleClass="newTableContainer left">
					<!-- Save button -->
					<p:commandButton value="#{msg['dialog.council.button.create']}"
						icon="fa fa-check-circle-o" update="@form"
						disabled="#{!dialog.councilDialog.editable}"
						actionListener="#{dialog.councilDialog.createCouncil()}"></p:commandButton>
				</h:panelGrid>



				<h:panelGrid columns="3" styleClass="newTableContainer right">

					<!-- media select for coincil reply -->
					<p:commandButton icon="fa-upload fa"
						rendered="#{dialog.councilDialog.selectedCouncil.isCouncilState('CompletedState', 'ValidetedState')}"
						title="#{msg['dialog.council.button.upload']}"
						actionListener="#{dialog.councilDialog.showMediaSelectDialog()}">
						<p:ajax event="dialogReturn" update="@form" />
					</p:commandButton>

					<!-- create and print -->
					<p:commandButton value="#{msg['general.print']}"
						icon="fa fa-check-circle-o" onstart="PF('blockUIWidget').block()"
						oncomplete="PF('blockUIWidget').unblock()"
						disabled="#{dialog.councilDialog.selectedCouncil eq null}">
						<f:actionListener
							binding="#{dialog.councilDialog.printCouncilReport()}" />
					</p:commandButton>

					<!-- Close button -->
					<p:commandButton value="#{msg['general.close']}" id="closeBtn"
						icon="fa fa-times-circle">
						<f:actionListener
							binding="#{dialog.councilDialog.saveCouncilData()}" />
						<f:actionListener binding="#{dialog.councilDialog.hideDialog()}" />
					</p:commandButton>
				</h:panelGrid>
			</h:panelGrid>
		</div>

		<ui:include src="../../../template/blockUi.xhtml"></ui:include>

	</h:form>
</h:body>
</html>
<!-- showMediaSelectDialog -->